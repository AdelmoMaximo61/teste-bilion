# Teste T√©cnico Bilion - Backend Developer (PL)

Este projeto √© uma API RESTful desenvolvida em **Node.js com TypeScript**, criada para atender aos requisitos do teste t√©cnico para a vaga de Desenvolvedor PL.

O objetivo principal √© demonstrar a capacidade de criar ambientes isolados de **Homologa√ß√£o** e **Produ√ß√£o** utilizando infraestrutura em nuvem (**AWS**) e esteira de CI/CD.

## üöÄ Tecnologias Utilizadas

- **Linguagem:** Node.js + TypeScript
- **Framework:** Express
- **Infraestrutura:** AWS Elastic Beanstalk (PaaS)
- **CI/CD:** GitHub Actions
- **Isolamento de Dados:** Armazenamento em mem√≥ria vol√°til (isolado por inst√¢ncia).

---

## ‚òÅÔ∏è Como foi feito o Deploy

O deploy √© totalmente automatizado utilizando **GitHub Actions**. Foi criado um fluxo de Integra√ß√£o Cont√≠nua (CI/CD) que observa as branches do reposit√≥rio e dispara a atualiza√ß√£o para o ambiente correspondente na AWS Elastic Beanstalk.

**Estrat√©gia de Branches:**

1. **Branch `dev` ‚Üí Ambiente de Homologa√ß√£o (HOMOL)**
   - Ao dar push na branch `dev`, o pipeline constr√≥i o projeto e faz o deploy na URL de homologa√ß√£o.
2. **Branch `main` ‚Üí Ambiente de Produ√ß√£o (PROD)**
   - Ao dar push ou merge na branch `main`, o pipeline constr√≥i o projeto e faz o deploy na URL de produ√ß√£o.

---

## üîê Onde est√£o as Vari√°veis de Ambiente

Para garantir a seguran√ßa e seguir as boas pr√°ticas (12-Factor App), as vari√°veis de ambiente **n√£o est√£o no c√≥digo**. Elas foram configuradas diretamente no console da AWS.

- **Localiza√ß√£o:** Painel AWS Elastic Beanstalk > Configuration > Updates, monitoring, and logging > Environment properties.
- **Vari√°vel configurada:** `ENV_NAME`
  - Valor em Homologa√ß√£o: `homol`
  - Valor em Produ√ß√£o: `prod`

A aplica√ß√£o l√™ essa vari√°vel (`process.env.ENV_NAME`) para identificar em qual ambiente est√° rodando e separar logicamente as respostas da API.

---

## üõ°Ô∏è Garantia da Separa√ß√£o entre Ambientes

A separa√ß√£o √© garantida em **n√≠vel de infraestrutura**:

1. **Inst√¢ncias Diferentes:** Existem dois ambientes distintos criados no Elastic Beanstalk (`teste-bilion-homol` e `teste-bilion-prod`). Cada um roda em sua pr√≥pria inst√¢ncia EC2 (Servidor Virtual).
2. **Mem√≥ria Isolada:** Como a persist√™ncia de dados deste teste √© feita em mem√≥ria (array local no Node.js), e os processos rodam em servidores f√≠sicos/virtuais diferentes, √© **imposs√≠vel** que um dado inserido em Homologa√ß√£o apare√ßa em Produ√ß√£o. Eles n√£o compartilham mem√≥ria nem banco de dados.

---

## üß™ Como Testar os Endpoints

> **‚ö†Ô∏è OBSERVA√á√ÉO IMPORTANTE:**
> A funcionalidade completa de separa√ß√£o de ambientes (vari√°veis `homol`/`prod`) depende da infraestrutura da AWS. **Para validar o teste, utilize exclusivamente as URLs da nuvem listadas abaixo.** A execu√ß√£o local serve apenas para desenvolvimento e retornar√° `env: local`.

Abaixo est√£o as URLs p√∫blicas e exemplos de comandos `curl` para validar o funcionamento e o isolamento dos ambientes.

### üîó URLs dos Ambientes

- **Homologa√ß√£o (HOMOL):** [http://teste-bilion-homol.eba-xhuvb2ie.us-east-2.elasticbeanstalk.com](http://teste-bilion-homol.eba-xhuvb2ie.us-east-2.elasticbeanstalk.com)
- **Produ√ß√£o (PROD):** [http://teste-bilion-prod.eba-xhuvb2ie.us-east-2.elasticbeanstalk.com](http://teste-bilion-prod.eba-xhuvb2ie.us-east-2.elasticbeanstalk.com)

### Exemplos de Teste (Copie e cole no terminal)

#### 1. Criar Usu√°rio em PRODU√á√ÉO

```bash
curl -X POST [http://teste-bilion-prod.eba-xhuvb2ie.us-east-2.elasticbeanstalk.com/user](http://teste-bilion-prod.eba-xhuvb2ie.us-east-2.elasticbeanstalk.com/user) \
-H "Content-Type: application/json" \
-d '{"name": "Usuario Prod", "email": "admin@producao.com"}'
```

#### 1. Criar Usu√°rio em HOMOL

```bash
curl -X POST [http://teste-bilion-homol.eba-xhuvb2ie.us-east-2.elasticbeanstalk.com/user](http://teste-bilion-homol.eba-xhuvb2ie.us-east-2.elasticbeanstalk.com/user) \
-H "Content-Type: application/json" \
-d '{"name": "Usuario Homol", "email": "teste@homol.com"}'
```

## üõ†Ô∏è Instala√ß√£o Local (Para Desenvolvimento)

Caso queira rodar o projeto localmente:

1. **Clone o reposit√≥rio:**

```bash
   git clone [https://github.com/AdelmoMaximo61/teste-bilion.git](https://github.com/AdelmoMaximo61/teste-bilion.git)
   cd teste-bilion
```

## Instale as depend√™ncias:

```bash
npm install
```

## Execute o servidor:

```bash
npm run dev
```
